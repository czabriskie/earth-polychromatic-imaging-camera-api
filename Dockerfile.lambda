FROM public.ecr.aws/lambda/python:3.12

# Install the package and dependencies
COPY pyproject.toml README.md ./
COPY src/ ./src/

# Install the package
RUN pip install --no-cache-dir -e .

# Copy the downloader script
COPY epic_s3_downloader.py ./

# Copy the Lambda handler
COPY lambda_handler.py ./

# Set the CMD to your handler
CMD ["lambda_handler.handler"]